<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="tian.web.dao.user.MenuDao">

    <select id="selectMenuList" resultType="java.util.Map">
        SELECT
            IFNULL( m.parent_id, '--' ) parent_id,
            IFNULL( mm.menu_item_name, '--' ) parentName,
            IFNULL( mm.icon_name, '--' ) parentIconName,
            m.menu_id,
            m.menu_name,
            m.menu_item_name,
            m.icon_name,
            m.menu_url,
            m.menu_des
        FROM
            menu m
                LEFT JOIN menu mm ON m.parent_id = mm.menu_id
        ORDER BY parent_id
    </select>
    <select id="selectMenuListBymap" resultType="java.util.Map">
        SELECT
        IFNULL(m.parent_id,'--') parent_id,
        IFNULL(mm.menu_item_name,'--') parentName,
        IFNULL(mm.icon_name,'--') parentIconName,
        m.menu_id,
        m.menu_name,
        m.menu_item_name,
        m.icon_name,
        m.menu_url,
        m.menu_des
        FROM
        menu m
        LEFT JOIN menu mm ON m.parent_id=mm.menu_id
        WHERE m.parent_id is not null and
        1=1
        <if test="map.menuName !=null and map.menuName !=''">
            and m.menu_name LIKE #{map.menuName}
        </if>
        <if test="map.iconName !=null and map.iconName !=''">
            AND m.icon_name LIKE #{map.iconName}
        </if>
        <if test="map.menuUrl !=null and map.menuUrl !=''">
            and m.menu_url like #{map.menuUrl}
        </if>
    </select>
</mapper>